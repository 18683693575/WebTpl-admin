(function(t){if(typeof define==="function"&&define.amd){define(["jquery","ChineseDistricts"],t)}else if(typeof exports==="object"){t(require("jquery"),require("ChineseDistricts"))}else{t(jQuery,ChineseDistricts)}})(function(t,i){"use strict";if(typeof i==="undefined"){throw new Error('The file "distpicker.data.js" must be included first!')}var e="distpicker";var s="change."+e;var n="province";var r="city";var c="district";function o(i,e){this.$element=t(i);this.options=t.extend({},o.DEFAULTS,t.isPlainObject(e)&&e);this.placeholders=t.extend({},o.DEFAULTS);this.active=false;this.init()}o.prototype={constructor:o,init:function(){var i=this.options;var e=this.$element.find("select");var s=e.length;var o={};e.each(function(){t.extend(o,t(this).data())});t.each([n,r,c],t.proxy(function(t,n){if(o[n]){i[n]=o[n];this["$"+n]=e.filter("[data-"+n+"]")}else{this["$"+n]=s>t?e.eq(t):null}},this));this.bind();this.reset();this.active=true},bind:function(){if(this.$province){this.$province.on(s,this._changeProvince=t.proxy(function(){this.output(r);this.output(c)},this))}if(this.$city){this.$city.on(s,this._changeCity=t.proxy(function(){this.output(c)},this))}},unbind:function(){if(this.$province){this.$province.off(s,this._changeProvince)}if(this.$city){this.$city.off(s,this._changeCity)}},output:function(e){var s=this.options;var o=this.placeholders;var a=this["$"+e];var h={};var f=[];var d;var u;var l;if(!a||!a.length){return}l=s[e];d=e===n?86:e===r?this.$province&&this.$province.find(":selected").data("code"):e===c?this.$city&&this.$city.find(":selected").data("code"):d;h=t.isNumeric(d)?i[d]:null;if(t.isPlainObject(h)){t.each(h,function(t,i){var e=i===l;if(e){u=true}f.push({code:t,address:i,selected:e})})}if(!u){if(f.length&&(s.autoSelect||s.autoselect)){f[0].selected=true}if(!this.active&&l){o[e]=l}}if(s.placeholder){f.unshift({code:"",address:o[e],selected:false})}a.html(this.getList(f))},getList:function(i){var e=[];t.each(i,function(t,i){e.push('<option value="'+(i.address&&i.code?i.address:"")+'" data-code="'+(i.code||"")+'"'+(i.selected?" selected":"")+">"+(i.address||"")+"</option>")});return e.join("")},reset:function(t){if(!t){this.output(n);this.output(r);this.output(c)}else if(this.$province){this.$province.find(":first").prop("selected",true).trigger(s)}},destroy:function(){this.unbind();this.$element.removeData(e)}};o.DEFAULTS={autoSelect:true,placeholder:true,province:"请选择省",city:"请选择市",district:"请选择县/区"};o.setDefaults=function(i){t.extend(o.DEFAULTS,i)};o.other=t.fn.distpicker;t.fn.distpicker=function(i){var s=[].slice.call(arguments,1);return this.each(function(){var n=t(this);var r=n.data(e);var c;var a;if(!r){if(/destroy/.test(i)){return}c=t.extend({},n.data(),t.isPlainObject(i)&&i);n.data(e,r=new o(this,c))}if(typeof i==="string"&&t.isFunction(a=r[i])){a.apply(r,s)}})};t.fn.distpicker.Constructor=o;t.fn.distpicker.setDefaults=o.setDefaults;t.fn.distpicker.noConflict=function(){t.fn.distpicker=o.other;return this};t(function(){t('[data-toggle="distpicker"]').distpicker()})});