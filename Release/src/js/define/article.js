layui.use(["layer","datatable"],function(){var n=layui.jquery,t=layui.layer;n(function(){n("#articleTable").dataTable({language:lang,autoWidth:!1,lengthMenu:[15,30,50],stripeClasses:["odd","even"],searching:!0,paging:!0,lengthChange:!0,info:!0,order:[1,"desc"],aoColumnDefs:[{orderable:!1,aTargets:[0,4,7]}],deferRender:!0,ajax:"../../../json/article.json",columns:[{data:function(n){return'<input type="checkbox" name="article-list" data-id='+n.id+">"}},{data:"id"},{data:"articleSorts"},{data:function(n){return'<u class="btn-showarticle">'+n.articleTitle+"</u>"}},{data:"articleContents",className:"oneline"},{data:function(n){return replaceTime(n.releaseTime/1e3)}},{data:function(n){return n.releaseStatus?'<span class="label label-success radius">正常发布</span>':'<span class="label label-default radius">暂停发布</span>'},className:"td-status"},{data:function(n){return n.releaseStatus?'<span title="暂停发布" class="handle-btn handle-btn-stop"><i class="linyer icon-zanting"></i></span><span title="编辑" class="handle-btn handle-btn-edit"><i class="linyer icon-edit"></i></span><span title="删除" class="handle-btn handle-btn-delect"><i class="linyer icon-delect"></i></span>':'<span title="正常发布" class="handle-btn handle-btn-run"><i class="linyer icon-qiyong"></i></span><span title="编辑" class="handle-btn handle-btn-edit"><i class="linyer icon-edit"></i></span><span title="删除" class="handle-btn handle-btn-delect"><i class="linyer icon-delect"></i></span>'},className:"td-handle"}]})}),n(".btn-showarticle").on("click",function(){var t=n(this).html(),e="article-show.html";layer_show(t,e,"","360","400")}),n("#btn-adduser").on("click",function(){var t=n(this).html(),e="article-add.html";layer_show(t,e,"","800","600")}),n(".table-sort").on("click",".handle-btn-stop",function(){var e=n(this);t.confirm("确认要暂停发布吗？",{icon:0,title:"警告"},function(a){n(e).parents("tr").find(".td-handle").prepend('<span class="handle-btn handle-btn-run" title="开始发布"><i class="linyer icon-qiyong"></i></span>'),n(e).parents("tr").find(".td-status").html('<span class="label label-default radius">暂停发布</span>'),n(e).remove(),t.msg("已暂停发布!",{icon:5,time:1e3})})}),n(".table-sort").on("click",".handle-btn-run",function(){var e=n(this);t.confirm("确认要开始发布吗？",{icon:0,title:"警告"},function(a){n(e).parents("tr").find(".td-handle").prepend('<span class="handle-btn handle-btn-stop" title="暂停发布"><i class="linyer icon-zanting"></i></span>'),n(e).parents("tr").find(".td-status").html('<span class="label label-success radius">正常发布</span>'),n(e).remove(),t.msg("已开始发布!",{icon:6,time:1e3})})}),n(".table-sort").on("click",".handle-btn-edit",function(){n(this);layer_show("编辑","article-edit.html","","600","500")}),n(".table-sort").on("click",".handle-btn-delect",function(){var e=n(this);t.confirm("确认要删除吗？",{icon:0,title:"警告"},function(a){n(e).parents("tr").remove(),t.msg("已删除!",{icon:1,time:1e3})})}),n("#btn-delect-all").on("click",function(){console.log(n(".table-sort tbody :checkbox:checked").length),0==n(".table-sort tbody :checkbox:checked").length?t.msg("请选择需要删除的数据！",{icon:0}):t.confirm("确认要删除吗？",{icon:0,title:"警告"},function(e){n(".table-sort tbody :checkbox:checked").parents("tr").remove(),t.msg("已删除!",{icon:1,time:1e3})})})});